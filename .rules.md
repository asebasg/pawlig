# PawLig: Guía de Estilo y Normas de Codificación para IA

Este documento establece las reglas y buenas prácticas para el desarrollo en el proyecto PawLig. Está diseñado para ser leído y comprendido por agentes de IA, con el fin de mantener un código consistente, legible y de alta calidad.

## 1. Forma de Codificación (Coding Style)

- **Indentación**: Usar 2 espacios. No usar tabs.
- **Comillas**: Usar comillas dobles (`"`) para todas las importaciones y cadenas de texto.
- **Punto y Coma**: Siempre terminar las sentencias con punto y coma (`;`).
- **Final de Archivo**: Todos los archivos deben terminar con una línea en blanco.
- **Componentes React**:
  - Escribir componentes como funciones (`function MiComponente() {}`).
  - Usar la extensión `.tsx` para archivos que contengan JSX.
  - Utilizar el hook `useState` y `useEffect` de forma clara y justificada.
  - Marcar explícitamente los componentes de cliente con `"use client";` al inicio del archivo.
- **Tailwind CSS**:
  - Escribir las clases en el atributo `className`.
  - Ordenar las clases de manera lógica: layout, espaciado, tipografía, colores y estado.

## 2. Nomenclatura General (Naming)

- **Variables y Funciones**: `camelCase`.
  - Ejemplo: `const userCount = 10;`, `function getUserData() {}`
- **Componentes**: `PascalCase`. El nombre del archivo debe coincidir.
  - Ejemplo: `PetCard.tsx`, `function PetCard() {}`
- **Tipos e Interfaces**: `PascalCase`.
  - Ejemplo: `type UserProfile = { ... };`
- **Archivos y Directorios**: `kebab-case`. La única excepción son los archivos de componentes (`PascalCase.tsx`).
  - Ejemplo: `lib/auth-utils.ts`, `components/ui/`, `app/(dashboard)/pets/`
- **Modelos de Prisma**: `PascalCase` para el modelo, `camelCase` para los campos.
  - Ejemplo: `model User { userId String }`
- **Enums**: `PascalCase` para el nombre, `SCREAMING_SNAKE_CASE` para los valores.
  - Ejemplo: `enum PetStatus { AVAILABLE, ADOPTED }`
- **Rutas de API**: `kebab-case`.
  - Ejemplo: `app/api/pets/find-by-status/route.ts`

## 3. Estructura de Código (Code Structure)

El proyecto sigue la estructura de Next.js App Router.

- **/app**: Contiene las rutas de la aplicación.
  - `(grupos)`: Para organizar rutas sin afectar la URL (ej. `(dashboard)`, `(auth)`).
  - `api/`: Para los endpoints del backend.
  - `layout.tsx`: Layout principal de la aplicación.
  - `page.tsx`: Página de inicio.
- **/components**: Componentes de React reutilizables.
  - `ui/`: Componentes genéricos de UI (Button, Input, Card).
  - `layout/`: Componentes de estructura (Navbar, Footer).
  - `forms/`: Formularios complejos.
  - `[feature]/`: Componentes específicos de una funcionalidad (ej. `pets/`, `adopter/`).
- **/lib**: Lógica de negocio, servicios y utilidades.
  - `auth/`: Configuración y lógica de NextAuth.
  - `services/`: Lógica para interactuar con la base de datos (ej. `pet.service.ts`).
  - `utils/`: Funciones de utilidad genéricas.
  - `validations/`: Esquemas de validación con Zod.
- **/prisma**: Contiene el `schema.prisma` que define la base de datos.
- **/types**: Definiciones de tipos globales de TypeScript.

## 4. Buenas Prácticas (Best Practices)

- **Modularidad**: Dividir el código en módulos pequeños y con una única responsabilidad.
- **Componentes Pequeños**: Crear componentes pequeños y reutilizables en lugar de componentes monolíticos.
- **Manejo de Estado**: Prefiere el estado local (`useState`). Usa estado global (`Context` o `Zustand`) solo cuando sea estrictamente necesario.
- **Tipado Fuerte**: Utiliza TypeScript en todo el proyecto. Evita el uso de `any`.
- **Variables de Entorno**: Almacena claves secretas y configuraciones en `.env.local`. Existe un `.env.local.example` como plantilla.
- **Manejo de Errores**: Implementa `try-catch` en llamadas asíncronas y muestra mensajes de error claros al usuario.
- **Código Asíncrono**: Usa `async/await` para operaciones asíncronas.

## 5. Documentación de Implementación

Al inicio (después de los imports y antes de la función) de cada archivo que contenga lógica de negocio significativa (servicios, componentes complejos, rutas de API), se debe agregar una sección de "Resúmen". Esta sección debe estar comentada y seguir la siguiente plantilla:

```typescript
/**
 * GET/POST/PUT/DELETE /api/users/profile (ruta de ejemplo)
 * Descripción: Breve descripción de la responsabilidad principal de este archivo.
 * Requiere: Usuario autenticado (ejemplo)
 * Implementa: HU-003 (Actualización de perfil) (ejemplo)
 */
```

Al final de cada archivo que contenga lógica de negocio significativa (servicios, componentes complejos, rutas de API), se debe agregar una sección de "Notas de Implementación". Esta sección debe estar comentada y seguir la siguiente plantilla:

```typescript
/*
 * ---------------------------------------------------------------------------
 * NOTAS DE IMPLEMENTACIÓN
 * ---------------------------------------------------------------------------
 *
 * Descripción General:
 * Breve descripción de la responsabilidad principal de este archivo.
 * (Ej: "Este servicio maneja todas las operaciones CRUD para las mascotas.")
 *
 * Lógica Clave:
 * - Punto 1: Explicación de una función o lógica compleja.
 *   (Ej: "La función 'getAvailablePets' filtra las mascotas por estado 'AVAILABLE'
 *   y aplica paginación para optimizar la carga de datos.")
 * - Punto 2: Justificación de una decisión de diseño.
 *   (Ej: "Se utiliza Zod para validar los datos de entrada en 'createPet'
 *   y asegurar la integridad de los datos antes de guardarlos en la base de datos.")
 *
 * Dependencias Externas:
 * - Lista de las librerías o APIs externas importantes y su propósito.
 *   (Ej: "- Cloudinary: Para el almacenamiento y gestión de imágenes de mascotas.")
 *   (Ej: "- NextAuth: Para proteger el endpoint y asegurar que solo usuarios
 *   autenticados puedan crear mascotas.")
 *
 */
```

Al ser comentarios de código, evitar utilizar valores markdown en ellos.

## 6. Qué NO Hacer

- **No hardcodear valores**: No incluyas cadenas de texto o valores mágicos directamente en el código. Usa `lib/constants.ts` o variables de entorno.
- **No mezclar responsabilidades**: No coloques lógica de base de datos dentro de un componente de UI. Usa los servicios en `/lib/services`.
- **No usar `any`**: Evita el tipo `any` en TypeScript. Define tipos o interfaces claras.
- **No ignorar la accesibilidad (a11y)**: Escribe HTML semántico y usa atributos ARIA cuando sea necesario.
- **No realizar mutaciones directas**: No modifiques el estado o las props directamente. Usa las funciones `setState` y trata los datos como inmutables.
- **No dejar `console.log`**: Elimina todos los `console.log` de depuración antes de enviar el código.
